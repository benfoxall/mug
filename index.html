<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>coffee</title>
	<script src="http://code.jquery.com/jquery-1.7.1.min.js" type="text/javascript"></script>
	
	<link href='http://fonts.googleapis.com/css?family=Droid+Sans|Bree+Serif' rel='stylesheet' type='text/css'>
	
	<script type="text/javascript" charset="utf-8">
	
	  var mugCode = function(){
      var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };
      $(this).on('mugorientation', function(e) {
        var coffee, drink;
        drink = __bind(function(coffee, angle) {
          return Math.min($(this).height() * angle, coffee.height());
        }, this);
        coffee = $('.coffee', this);
        if (!coffee.size()) {
          return;
        }
        coffee.height(drink(coffee, e.angle));
        if (coffee.height() <= 0) {
          coffee.remove();
          return $(this).trigger('more.coffee');
        }
      });
      $(this).on('more.coffee', function() {
        return $.get('coffee://trojan', {
          success: __bind(function(coffee) {
            return $(this).append(coffee);
          }, this),
          statusCode: {
            418: function() {
              return alert("I'm a tea pot");
            }
          }
        });
      });
	  }
	
	 $(function(){
	   var mug = $('#mug');
	   $.proxy(mugCode, mug)();
	   
	   var betafirst;
	   
     // // mugs are slightly different from browsers
          window.addEventListener("deviceorientation", function(e){
            
            if(!betafirst) {
              betafirst = e.beta;
            }
            
            // mugs have a slightly different api
            var mugevent = jQuery.Event("mugorientation");
            mugevent.angle = 1 - (Math.abs(betafirst - e.beta)/90);
            
            mug.trigger(mugevent)
          });
     //      
     
     $(document).on('mousemove', function(e){
           
           var mugevent = jQuery.Event("mugorientation");
           mugevent.angle = 1- e.clientY/$(document).height();
         
           mug.trigger(mugevent)
           
         })

	 })
	 
   // var i = 0;
   // window.addEventListener("deviceorientation", function(e){
   //      $('#l').text(i++)
   //    })
	</script>
	<style type="text/css" media="screen">

	#mug{
		width: 287px;
		height: 439px;
		position:absolute;
		top:50%;
		margin-top:-200px;
		left:50%;
		margin-left:-143px;
		
		vertical-align:bottom;
	}
	.mask {
		background: url('img/mug.png') no-repeat scroll top left;
		width:505px;
		height: 505px;
		position:absolute;
		z-index:100;
	}
	.coffee {
		background: url('img/coffee.png') no-repeat scroll center top;
		height:380px;
		width:290px;
		left:0;
		display:inline-block;
		bottom:0;
		vertical-align:bottom;
		position:absolute;
		bottom:0;
	}
	
	
	body{
		color:#0084af;
		margin:0;
	}
	h1{
		font-weight:normal;
	}
	header,footer{
		position:absolute;
		width:90%;
		margin:0 5%;
		z-index:150;
	}
	header{
		top:0;
		font-family: 'Bree Serif', serif;
		text-align:center;
	}
	footer{
		bottom:0;
		font-family: 'Droid Sans', sans-serif;
	}
	
	p.info{
		width:50%;
		float:right;
		font-size:1.3em;
	}
	a{
		color:#0084af;
		text-decoration:none;
	}
	.info a{
		font-size:.7em;
		display:block;
		margin-top:.5em;
	}
	
	p.links{
		float:left;
	}
	img{
		width:30%;
		margin-right:1em;
		float:left;
		max-width:74px;
	}
	.mail img{
		clear:left;
	}
	.web img{
		width:90%;
		margin-bottom:1em;
		max-width:245px;
	}
	p.links{
		float:left;
		width:50%;
	}
	</style>
</head>
<body>
<header>
	<h1>Thanks for coming to the conference!</h1>
</header>
  <div id="mug">
		<div class="mask"></div>
    <div class="coffee"></div>
  </div>
<footer>
	<p class="info">
		Hear about White October jobs first with our careers bulletin <a href="http://eepurl.com/dex8-">http://eepurl.com/dex8-</a>
	</p>
	<p class="links">
		<a class="web" href="http://www.whiteoctober.co.uk/"><img src="img/wo2.png" alt="White October"></a>
		<a class="mail" href="mailto:info@whiteoctober.co.uk"><img src="img/mail.png" alt="info@whiteoctober.co.uk"></a>
		<a class="twitter" href="https://twitter.com/#!/whiteoctober"><img src="img/tw.png" alt="@whiteoctober"></a>
	</p>
</footer>
</body>
</html>
